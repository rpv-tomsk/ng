branches/ng6

    * Удалена поддержка METHOD (метода обработки перед сохранением) в описании конфигурации полей NG::Field
    * Изменилось поведение NG::Field->setLoadedValue(), теперь в него передается вся полученная строка БД
    * NG::Module::List::Row->new() / NG::Module::List::Row->init() - изменено API
    - NG::Module::List::Row->number()
    - NG::Module::List::Row->addColumn()
    - NG::Module::List::Row->buildColumnList()
    - NG::Module::List::Row->getComposedKeyValue()
    * NG::Module::List::Row - HCOLUMNS переименовано в HFIELDS

    * Изменена работа processChilds. Требуется перепроверить все конфигурации полей с заданным CHILDS.
      Поддерживается обратная совместимость только на связке image->image.
      В случае связки file->file при (пере)заливке содержимого основного поля подчиненные будут пустыми (очищены).
      
    * NG::Field->new(): Изменена последовательность создания объектов полей (NG::Field и потомков).
      При указанном CLASS проверка типа TYPE в new() не производится. (несколько бесполезно, т.к. List все еще проверяет TYPE при analyze)
      Несовместимость: TYPE=>'fkparent' + CLASS=>'Some::Class' - не произойдет замена fkparent -> hidden/select/radiobutton
    * Удален тип поля float, используйте number.
    * Вынесено $NG::Field::classesMap

branches/ng-4.3

===
    ЗАМЕЧАНИЯ!
    
    1) NG::Module::List->setFormStructure(), NG::Module::Record->formStructure()   --- ?
    
    2) NG::Module::Record - CheckData(), BeforeInsert(), AfterInsert(), BeforeUpdate(), AfterUpdate() - переименовать согласно NG::Module::List ?

    3) NG::Dispatch - появились die() !
    
    4) Чистка кода, в новых фичах системы много TODO.
    
    Требуется review для коммитов, которые не влиты в ng-4.3
    
    r1053,r1056 - NG::Sitemap 
    
    r1055 - событие deletenode - передавать ID или PAGEOBJ ? Использование PAGEOBJ - не рекомендуется,
            поскольку событие вызывается для уже удаленной страницы и методы могут возвращать неверное значение.
            
            
    
===
    Общие изменения

    + Добавлен класс NG::Session и реализации хранилищ сессий (с бэкпортом в ng-4.2)
    + Поддержка системных событий (NG::Event, NG::Sitestruct::Event, NG::Module::List::Event)
    * В свойствах страниц CMS появилось новое обязательное поле title
    * JS из шаблона universaladm.tmpl вынесен в ng.js, чистка JS
    * Фикс отображения popup-окон в случае устаревания сессии
    * Код администрирования пользователей и смены пароля изменен для использования новых возможностей формы и полей. Плохо оттестирована работа групп админов.
    * Тьюринг конфигурируется через основной конфиг сайта

    NG::Form
    
    + Для поддержки использования нескольких конфигураций форм в NG::Module::List в свойства формы введен идентифицирующий префикс
    * Реорганизация работы с полями (action-ы полей обрабатываются полями, вызовы соответствующих методов полей при операциях с данными)
    + Структура формы - возможно определять компоновку полей на форме
    * Изменена передача параметров формы в шаблон - теперь через хэш FORM

    
    NG::Field
    
    * Реорганизация методов для удобного наследования классов
    + Поля теперь умеют обрабатывать действия пользователя самостоятельно

    + NG::Field::Select для полей типов select | radiobutton  ( тип fkselect совмещен с select путем расширенной конфигурации источника данных списка)
    + NG::Field::Multicheckbox для полей типов multicheckbox | multiselect


    NG::Module::List
    
    * переработан, реорганизован код.
    * !!! переименованы основные методы для перекрытия модуля !!!
            CheckData()     ->  checkData()
            PrepareData     ->  prepareData()
            BeforeDelete()  ->  beforeDelete()
            AfterDelete()   ->  afterDelete()
            RowFunction     ->  rowFunction()
    + Возможность использования нескольких форм для редактирования записи ( additionalForm() )
    + Обработка действий с формой и полями формы через action=formaction
    + Конфигурирование структуры и шаблона формы через setFormStructure() setFormTemplate()
    * Изменено конфигурирование привилегий на действия со списком (удален listPrivileges(), новые методы setAddPriv() setEditPriv() setDeletePriv())


    NG::Module::Record
    
    + Обработка действий с формой и полями формы через action=formaction
    + Конфигурирование структуры и шаблона формы через formStructure() setFormTemplate()
    

tags/ng-4.2
    
    Версия 4.2. Основана на r920. Основные изменения:
    
    Переработанный NG::Adminside. Объекты NG::PageModule, управляемое создание страниц, изменяемый атрибутный состав страницы.
    Поиск по Module::List, переходы на созданную запись. Переработанный полнотекстовый поиск по сайту, новый стиль его конфигурации. 
    

    NGService
    
    + getURLWithParams()
    + datetime2date()
    
    NHtml
    
    * Исправлены парсеры cite и quote
    
    NG::Bootstrap
    
    + тестовая возможность запуска в режиме FastCGI
    
    NG::Application 
    
    + Возможность выставлять флаг nocache
    + Возможность выставлять content-type ответа 
    
    NG::Adminside 
    
    + getModuleObject() с параметром инициализации модуля в виде HASH
    + NG::PageModule. Новый код управления страницами. Страница-модуль. 
      Контролируемое создание/удаление/итд
    + Код сохранения данных индексов перенесен в NG::DBI.
    + Новый стиль конфигурации индексатора данных
    + Гибкий список параметров страницы, конфигурируемая форма свойств страницы
    + Возможность отключения вкладок в админке
    + Отдельная привилегия на удаление страниц
    
    NG::Face 
    
    + setHistory
    + pushHistory
    + поддержка конфигурации списка полей свойств страницы

    NG::Module::List
    
    + Класс NG::Module::List::Row
    + Большее использование возможностей класса NG::Field
    + Поиск по списку 
    + Добавлены режимы перенаправления на добавленную строку, подсветка добавленной строки
    + Реальная многофильтровость в списке
    + Тип фильтра "tabs" 
    * метод getListFilter удален в пользу метода getListFilters
    + BeforeBuildList
    + AfterBuildList
    + Переменная в шаблоне: BEFORE_LIST_TMPL
    + Корректная работа индексатора, если изменение данных влечет изменение суффикса индекса.
    
    NG::Form 
    
    + подчиненные поля (CHILDS)
    + Обработка данных поля (METHOD)
    
    NG::Field
    
    + Поле типа URL 
    
    NG::Polls
    
    + HTML-подтверждение удаления варианта ответа
    * Сброс вариантов ответа по умолчанию при смене типа опроса
    
    
    JS-скрипт:
    + Функция PostForm() отправки формы с использованием фрейма.
    + Функция ajax_form(): поддержка методов POST и GET, указанных в отправляемой форме
    
    * Фиксы мелких ошибок, предупреждений, чистка кода.


tags/ng-4.1

    Базовая версия 4.1.

    Основана на r711, c изменениями до r743 за исключением новых функций добавления страниц.


Изменения по сравнению с версией ng-4.0:


Важные изменения:

* изменен порядок параметров в вызове afterFormLoadData($action,$form) на afterFormLoadData($form,$action);
* Изменен метод(принцип) конфигурации rtf-полей.
+ Класс NG::Field
+ Класс NG::Module::List::Filters, многофильтровость
* Изменена структура размещения js-скриптов CMS, теперь они в /admin-side/js/common/
* Методы работы с полнотекстовым индексом вынесены в подклассы NG::DBI
+ Класс сбора статистики NG::Counter
+ Добавлена установка фокуса на поле ввода логина при входе в админку

Общие изменения

+ Использование модулей File::Copy, File::Path для файловых операций.
- NGService::move_file
- NGService::create_dir
+ NGService::loadValueFromFile
+ NGService::saveValueToFile
* NGService::get_size_text отображает размер в Гб как максимальное значение
+ NGService::create_page_list формирует PREV_LIST,NEXT_LIST 
+ NGService::current_datetime
+ NSecure::is_valid_referer 
* Исправлена проверка прав на линкованные блоки в NG::Module::Sitestruct
+ NG::Bootstrap формирует переменные метода запуска CMS
+ Свойство NG::Module::readonly()
+ Код возврата M_EXIT и метод NG::Module::exit для немедленного завершения обработки запроса в a-side
+ метод traverseWithCheck и его использование в редакторе привилегий.


NG::Form

* Изменен метод(принцип) конфигурации rtf-полей.
+ поле rtfconfig в таблице ng_templates, вместо styles_list,css_file,templates_list
+ Использование NG::Field
+ Поле типа email
+ Добавлено корректное уничтожение rtf-редакторов при закрытии форм редактирования

Изменения в модуле NG::Module::List

+ Класс NG::Module::List::Filters, многофильтровость
+ Использование NG::Field
+ Non-AJAX подтверждение удаления записи в List
+ Возможность указания имени записи в формах List
+ NG::Module::List::beforeInsertUpdate($form,$action)
+ Начальная реализация поиска по List-у
+ disablePages()
+ проверка наличия указания типов полей в конфигурации модуля
* исправлено формирование ссылок сортиовки в столбцах, добавлены FKParam и FilterParam


tags/ng-4.0

    Базовая версия 4.0.

    Основана на r621, c изменениями  r622,r644. 
